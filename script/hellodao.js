var _voterShareAddress = token.address;
var _minimumQuorum = 10; // Minimun amount of voter tokens the proposal needs to pass
var _debatingPeriod = 60; // debating period, in minutes;

personal.unlockAccount(web3.eth.accounts[0], "12345678")

var democracyContract = web3.eth.contract([{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"proposals","outputs":[{"name":"recipient","type":"address"},{"name":"amount","type":"uint256"},{"name":"data","type":"bytes32"},{"name":"description","type":"string"},{"name":"creationDate","type":"uint256"},{"name":"active","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_proposalID","type":"uint256"}],"name":"executeProposal","outputs":[{"name":"result","type":"int256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_recipient","type":"address"},{"name":"_amount","type":"uint256"},{"name":"_data","type":"bytes32"},{"name":"_description","type":"string"}],"name":"newProposal","outputs":[{"name":"proposalID","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"debatingPeriod","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"numProposals","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"founder","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_proposalID","type":"uint256"},{"name":"_position","type":"int256"}],"name":"vote","outputs":[{"name":"voteID","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"minimumQuorum","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"voterShare","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"inputs":[{"name":"_voterShareAddress","type":"address"},{"name":"_minimumQuorum","type":"uint256"},{"name":"_debatingPeriod","type":"uint256"}],"payable":false,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"proposalID","type":"uint256"},{"indexed":false,"name":"recipient","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"data","type":"bytes32"},{"indexed":false,"name":"description","type":"string"}],"name":"ProposalAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"proposalID","type":"uint256"},{"indexed":false,"name":"position","type":"int256"},{"indexed":false,"name":"voter","type":"address"}],"name":"Voted","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"proposalID","type":"uint256"},{"indexed":false,"name":"result","type":"int256"},{"indexed":false,"name":"quorum","type":"uint256"},{"indexed":false,"name":"active","type":"bool"}],"name":"ProposalTallied","type":"event"}]);
var democracy = democracyContract.new(
   _voterShareAddress,
   _minimumQuorum,
   _debatingPeriod,
   {
     from: web3.eth.accounts[0], 
     data: '0x6060604052341561000f57600080fd5b604051606080611131833981016040528080519060200190919080519060200190919080519060200190919050505b33600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555082600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600a821760008190555062278d00603c8202176001819055505b5050505b611044806100ed6000396000f30060606040523615610097576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063013cf08b1461009c5780630d61b519146101b0578063173a4b70146101e757806339ce39831461028d578063400e3949146102b65780634d853ee5146102df5780635e44daf3146103345780638160f0b514610374578063fd46146a1461039d575b600080fd5b34156100a757600080fd5b6100bd60048080359060200190919050506103f2565b604051808773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018681526020018560001916600019168152602001806020018481526020018315151515815260200182810382528581815460018160011615610100020316600290048152602001915080546001816001161561010002031660029004801561019c5780601f106101715761010080835404028352916020019161019c565b820191906000526020600020905b81548152906001019060200180831161017f57829003601f168201915b505097505050505050505060405180910390f35b34156101bb57600080fd5b6101d1600480803590602001909190505061046a565b6040518082815260200191505060405180910390f35b34156101f257600080fd5b610277600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919080359060200190919080356000191690602001909190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190505061076c565b6040518082815260200191505060405180910390f35b341561029857600080fd5b6102a0610a2e565b6040518082815260200191505060405180910390f35b34156102c157600080fd5b6102c9610a34565b6040518082815260200191505060405180910390f35b34156102ea57600080fd5b6102f2610a3a565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561033f57600080fd5b61035e6004808035906020019091908035906020019091905050610a60565b6040518082815260200191505060405180910390f35b341561037f57600080fd5b610387610d96565b6040518082815260200191505060405180910390f35b34156103a857600080fd5b6103b0610d9c565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b60048181548110151561040157fe5b906000526020600020906008020160005b915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169080600101549080600201549080600301908060040154908060050160009054906101000a900460ff16905086565b60008060008060008060048781548110151561048257fe5b906000526020600020906008020160005b509450600154856004015401421180156104bb57508460050160009054906101000a900460ff165b156107615760009350600092505b846006018054905083101561061f5784600601838154811015156104e957fe5b906000526020600020906002020160005b509150600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663bbd39ac08360010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15156105e657600080fd5b6102c65a03f115156105f757600080fd5b505050604051805190509050808401935081600001548102860195505b8260010192506104c9565b600054841180156106305750600086135b156106c7578460000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168560010154866002015460405180826000191660001916815260200191505060006040518083038185876187965a03f1925050505060008560050160006101000a81548160ff0219169083151502179055506106fc565b600054841180156106d85750600086125b156106fb5760008560050160006101000a81548160ff0219169083151502179055505b5b7fd220b7272a8b6d0d7d6bcdace67b936a8f175e6d5c1b3ee438b72256b32ab3af8787868860050160009054906101000a900460ff16604051808581526020018481526020018381526020018215151515815260200194505050505060405180910390a15b5b5050505050919050565b6000806000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663bbd39ac0336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b151561083657600080fd5b6102c65a03f1151561084757600080fd5b505050604051805190501115610a24576004805480919060010161086b9190610dc2565b915060048281548110151561087c57fe5b906000526020600020906008020160005b509050858160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508481600101819055508381600201816000191690555082816003019080519060200190610901929190610df4565b5042816004018190555060018160050160006101000a81548160ff0219169083151502179055507f095779230509156998187c606e5b8a5a734137945aa43da9bf39c5e7f529a86b8287878787604051808681526020018573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001848152602001836000191660001916815260200180602001828103825283818151815260200191508051906020019080838360005b838110156109db5780820151818401525b6020810190506109bf565b50505050905090810190601f168015610a085780820380516001836020036101000a031916815260200191505b50965050505050505060405180910390a1600182016005819055505b5b50949350505050565b60015481565b60055481565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000806000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663bbd39ac0336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1515610b2a57600080fd5b6102c65a03f11515610b3b57600080fd5b50505060405180519050118015610b7e57507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff83121580610b7d575060018313155b5b15610d8e57600484815481101515610b9257fe5b906000526020600020906008020160005b509050600115158160070160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615151415610c0657610d8f565b806006018054809190600101610c1c9190610e74565b915060408051908101604052808481526020013373ffffffffffffffffffffffffffffffffffffffff168152508160060183815481101515610c5a57fe5b906000526020600020906002020160005b506000820151816000015560208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555090505060018160070160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055507f0ee65d9041aa0fefb9e13f940fcdce8fb817356542f5024e16208214b26efc09848433604051808481526020018381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001935050505060405180910390a15b5b5092915050565b60005481565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b815481835581811511610def57600802816008028360005260206000209182019101610dee9190610ea6565b5b505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610e3557805160ff1916838001178555610e63565b82800160010185558215610e63579182015b82811115610e62578251825591602001919060010190610e47565b5b509050610e709190610f38565b5090565b815481835581811511610ea157600202816002028360005260206000209182019101610ea09190610f5d565b5b505050565b610f3591905b80821115610f3157600080820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff021916905560018201600090556002820160009055600382016000610efc9190610fab565b60048201600090556005820160006101000a81549060ff0219169055600682016000610f289190610ff3565b50600801610eac565b5090565b90565b610f5a91905b80821115610f56576000816000905550600101610f3e565b5090565b90565b610fa891905b80821115610fa4576000808201600090556001820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff021916905550600201610f63565b5090565b90565b50805460018160011615610100020316600290046000825580601f10610fd15750610ff0565b601f016020900490600052602060002090810190610fef9190610f38565b5b50565b50805460008255600202906000526020600020908101906110149190610f5d565b5b505600a165627a7a723058207b0b1d26578ec65e663b0030adeee14125a98738fb4fe04f4c4cd4a3334633820029', 
     gas: '1500000'
   }, function (e, contract){
    console.log(e, contract);
    if (typeof contract.address !== 'undefined') {
         console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
    }
 })
